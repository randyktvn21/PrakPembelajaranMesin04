<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üå¶Ô∏è CuacaAI - Prediksi Suhu Besok</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f0f23 75%, #000000 100%);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(75, 0, 130, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 0, 139, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(25, 25, 112, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(72, 61, 139, 0.2) 0%, transparent 50%);
            pointer-events: none;
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(-20px) translateY(-10px); }
            50% { transform: translateX(20px) translateY(10px); }
            75% { transform: translateX(-10px) translateY(20px); }
        }

        .fade-in {
            animation: fadeIn 1.2s ease-in-out;
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(138, 43, 226, 0.4), 0 0 40px rgba(75, 0, 130, 0.2);
            }
            50% {
                box-shadow: 0 0 30px rgba(138, 43, 226, 0.6), 0 0 60px rgba(75, 0, 130, 0.3);
            }
        }

        .glass-effect {
            background: rgba(25, 25, 112, 0.2);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(138, 43, 226, 0.3);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(138, 43, 226, 0.2),
                0 0 20px rgba(75, 0, 130, 0.1);
        }

        .glass-effect:hover {
            background: rgba(75, 0, 130, 0.25);
            transform: translateY(-5px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(138, 43, 226, 0.3),
                0 0 30px rgba(75, 0, 130, 0.2);
        }

        .gradient-text {
            background: linear-gradient(135deg, #8a2be2 0%, #4b0082 25%, #6a0dad 50%, #8b008b 75%, #9932cc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientShift 3s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .loading-spinner {
            border: 3px solid #2d2d2d;
            border-top: 3px solid #8a2be2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .input-focus {
            transition: all 0.3s ease;
            color: #e0e0e0 !important;
            font-weight: 500;
        }

        .input-focus:focus {
            transform: scale(1.02);
            box-shadow: 0 0 0 4px rgba(138, 43, 226, 0.2), 0 0 20px rgba(75, 0, 130, 0.1);
            background-color: rgba(25, 25, 112, 0.3) !important;
            color: #e0e0e0 !important;
        }

        .input-focus::placeholder {
            color: rgba(224, 224, 224, 0.6) !important;
        }

        .particle {
            position: absolute;
            background: rgba(138, 43, 226, 0.2);
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 15s infinite linear;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .neon-glow {
            box-shadow: 
                0 0 5px rgba(138, 43, 226, 0.6),
                0 0 10px rgba(75, 0, 130, 0.4),
                0 0 15px rgba(139, 0, 139, 0.3),
                0 0 20px rgba(72, 61, 139, 0.2);
        }

        .button-hover {
            position: relative;
            overflow: hidden;
        }

        .button-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .button-hover:hover::before {
            left: 100%;
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>

<body class="flex flex-col items-center justify-center px-4 py-8">

    <!-- Floating Particles -->
    <div id="particles-container"></div>

    <!-- Card Utama -->
    <div class="glass-effect shadow-2xl rounded-3xl p-6 md:p-10 w-full max-w-4xl fade-in relative overflow-hidden card-hover neon-glow">
        
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute top-10 left-10 w-20 h-20 bg-white rounded-full floating"></div>
            <div class="absolute top-20 right-20 w-16 h-16 bg-white rounded-full floating" style="animation-delay: 1s;"></div>
            <div class="absolute bottom-20 left-20 w-12 h-12 bg-white rounded-full floating" style="animation-delay: 2s;"></div>
        </div>

        <!-- Header -->
        <div class="text-center mb-8 relative z-10">
            <div class="inline-block mb-4 relative">
                <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-indigo-800 rounded-full blur-lg opacity-60 scale-150"></div>
                <i class="fas fa-cloud-sun text-6xl text-white floating relative z-10"></i>
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-4">
                <span class="gradient-text typing-cursor">CuacaAI</span>
            </h1>
            <p class="text-white/90 text-lg md:text-xl font-medium">Prediksi suhu udara besok menggunakan model <span class="bg-gradient-to-r from-purple-600 to-indigo-800 px-3 py-1 rounded-lg font-bold text-white shadow-lg">LSTM</span> berbasis data 60 hari terakhir</p>
            
            <!-- Decorative elements -->
            <div class="flex justify-center mt-6 space-x-2">
                <div class="w-2 h-2 bg-white/60 rounded-full animate-pulse"></div>
                <div class="w-2 h-2 bg-white/60 rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                <div class="w-2 h-2 bg-white/60 rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
            </div>
        </div>

        <!-- Form Input -->
        <form action="/predict" method="POST" class="space-y-6 relative z-10" id="predictionForm">
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
                <label for="sequence" class="block text-white font-semibold text-left mb-3 flex items-center">
                    <i class="fas fa-thermometer-half mr-2"></i>
                    Masukkan Data Suhu (¬∞C)
                </label>
                <textarea id="sequence" name="sequence" rows="4"
                    class="w-full p-4 border-2 border-white/30 rounded-2xl shadow-sm focus:ring-4 focus:ring-white/20 focus:outline-none bg-white/20 placeholder-white/60 text-gray-800 font-medium input-focus"
                    placeholder="Contoh: 25.1, 24.9, 25.3, 26.0, 26.2, ..."
                    required></textarea>
                
                <div class="mt-3 text-white/70 text-sm">
                    <i class="fas fa-info-circle mr-1"></i>
                    Masukkan tepat 60 nilai suhu, dipisahkan dengan koma
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-between">
                <button type="button" onclick="autoFill()"
                    class="bg-gradient-to-r from-purple-700 to-indigo-800 hover:from-purple-800 hover:to-indigo-900 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center button-hover">
                    <i class="fas fa-magic mr-2"></i>
                    Auto Isi Contoh
                </button>
                <button type="submit" id="submitBtn"
                    class="bg-gradient-to-r from-purple-600 to-violet-800 hover:from-purple-700 hover:to-violet-900 text-white px-8 py-3 rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:scale-105 pulse-glow flex items-center justify-center button-hover">
                    <i class="fas fa-brain mr-2"></i>
                    Prediksi Sekarang
                </button>
            </div>
        </form>

        <!-- Hasil Prediksi -->
        {% if prediction %}
        <div class="mt-10 bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 slide-up relative z-10 card-hover">
            <div class="flex items-center mb-4">
                <div class="bg-gradient-to-r from-purple-600 to-indigo-800 p-3 rounded-full mr-4">
                    <i class="fas fa-chart-line text-white text-xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-white">Hasil Prediksi Suhu Besok</h2>
            </div>
            
            <div class="text-center mb-6">
                <div class="inline-block bg-gradient-to-r from-purple-700 to-indigo-900 p-8 rounded-3xl shadow-2xl relative overflow-hidden">
                    <!-- Animated background -->
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-indigo-800 opacity-30 animate-pulse"></div>
                    
                    <!-- Temperature display -->
                    <div class="relative z-10">
                        <p class="text-7xl font-extrabold text-white mb-2 drop-shadow-lg">{{ prediction }}</p>
                        <div class="flex items-center justify-center text-white/90">
                            <i class="fas fa-thermometer-half mr-2 text-2xl"></i>
                            <span class="text-xl font-semibold">Prediksi Suhu</span>
                        </div>
                    </div>
                    
                    <!-- Decorative elements -->
                    <div class="absolute top-2 right-2 w-4 h-4 bg-white/20 rounded-full animate-ping"></div>
                    <div class="absolute bottom-2 left-2 w-3 h-3 bg-white/20 rounded-full animate-ping" style="animation-delay: 0.5s;"></div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-white/10 rounded-xl p-4 text-center card-hover relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-indigo-800 opacity-15"></div>
                    <div class="relative z-10">
                        <div class="text-white/70 text-sm mb-1 flex items-center justify-center">
                            <i class="fas fa-chart-bar mr-1"></i>
                            RMSE
                        </div>
                        <div class="text-2xl font-bold text-white">{{ rmse }}</div>
                    </div>
                </div>
                <div class="bg-white/10 rounded-xl p-4 text-center card-hover relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-r from-indigo-600 to-violet-800 opacity-15"></div>
                    <div class="relative z-10">
                        <div class="text-white/70 text-sm mb-1 flex items-center justify-center">
                            <i class="fas fa-chart-line mr-1"></i>
                            MAE
                        </div>
                        <div class="text-2xl font-bold text-white">{{ mae }}</div>
                    </div>
                </div>
            </div>
            
            <p class="text-white/70 text-sm text-center mb-6">
                <i class="fas fa-info-circle mr-1"></i>
                Prediksi ini dihasilkan berdasarkan pola suhu 60 hari terakhir menggunakan model LSTM
            </p>

            <div class="bg-white/5 rounded-xl p-4">
                <canvas id="resultChart" height="120"></canvas>
            </div>
        </div>

        <script>
            const ctx = document.getElementById('resultChart');
            const predictionValue = parseFloat('{{ prediction }}'.replace('¬∞C', ''));
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Hari 1', 'Hari 2', 'Hari 3', 'Hari 4', 'Hari 5', 'Hari 6', 'Hari 7', 'Hari 8', 'Hari 9', 'Besok'],
                    datasets: [{
                        label: 'Suhu Aktual',
                        data: [26, 26.3, 26.1, 26.4, 26.7, 27, 26.9, 26.8, 26.5, 26.4],
                        borderColor: 'rgba(138, 43, 226, 0.8)',
                        backgroundColor: 'rgba(138, 43, 226, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: 'rgba(138, 43, 226, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }, {
                        label: 'Prediksi Model',
                        data: [26, 26.2, 26.4, 26.5, 26.6, 26.8, 26.9, 27, 27.1, predictionValue],
                        borderColor: 'rgba(75, 0, 130, 0.8)',
                        backgroundColor: 'rgba(75, 0, 130, 0.1)',
                        borderWidth: 3,
                        borderDash: [8, 4],
                        tension: 0.4,
                        fill: false,
                        pointBackgroundColor: 'rgba(75, 0, 130, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { 
                            position: 'bottom',
                            labels: {
                                color: 'white',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        </script>

        {% elif error %}
        <div class="mt-10 bg-red-500/20 backdrop-blur-sm border border-red-400/30 p-6 rounded-2xl text-red-100 slide-up relative z-10">
            <div class="flex items-center">
                <div class="bg-red-500/30 p-3 rounded-full mr-4">
                    <i class="fas fa-exclamation-triangle text-red-200 text-xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-red-100 mb-1">Terjadi Kesalahan</h3>
                    <p class="text-red-200">{{ error }}</p>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Footer -->
        <div class="mt-10 text-center text-white/70 text-sm border-t border-white/20 pt-6 relative z-10">
            <div class="flex items-center justify-center mb-2">
                <i class="fas fa-brain mr-2"></i>
                <span class="font-semibold">Prediksi Data Sekuensial Menggunakan Model LSTM</span>
            </div>
            <p class="text-white/50">Powered by Artificial Intelligence & Machine Learning</p>
        </div>
    </div>

    <!-- Script Auto Fill dan Loading -->
    <script>
        function autoFill() {
            const data = [
                25.1, 24.9, 25.3, 25.0, 25.4, 26.0, 26.3, 26.1, 25.9, 26.2,
                26.5, 26.7, 26.9, 27.0, 27.1, 27.3, 27.0, 26.8, 26.5, 26.2,
                25.9, 25.7, 25.4, 25.0, 24.9, 24.7, 24.6, 24.5, 24.7, 24.9,
                25.0, 25.2, 25.5, 25.8, 26.0, 26.3, 26.5, 26.7, 26.9, 27.1,
                27.0, 26.8, 26.6, 26.3, 26.0, 25.7, 25.4, 25.2, 25.0, 24.8,
                24.7, 24.9, 25.0, 25.3, 25.6, 25.9, 26.2, 26.5, 26.7, 27.0
            ];
            document.getElementById("sequence").value = data.join(", ");
        }

        // Loading animation saat form submit
        document.getElementById('predictionForm').addEventListener('submit', function() {
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<div class="loading-spinner mr-2"></div>Memproses...';
            submitBtn.disabled = true;
            submitBtn.classList.add('opacity-75');
        });

        // Validasi input real-time
        document.getElementById('sequence').addEventListener('input', function() {
            const value = this.value;
            const numbers = value.split(',').filter(num => num.trim() !== '');
            
            if (numbers.length > 60) {
                this.style.borderColor = '#ef4444';
                this.style.backgroundColor = 'rgba(239, 68, 68, 0.2)';
                this.style.color = '#1f2937';
            } else if (numbers.length === 60) {
                this.style.borderColor = '#10b981';
                this.style.backgroundColor = 'rgba(16, 185, 129, 0.2)';
                this.style.color = '#1f2937';
            } else {
                this.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                this.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                this.style.color = '#1f2937';
            }
        });

        // Smooth scroll untuk hasil prediksi
        function scrollToResult() {
            const resultElement = document.querySelector('.slide-up');
            if (resultElement) {
                resultElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Floating particles animation
        function createParticles() {
            const container = document.getElementById('particles-container');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random size between 2px and 8px
                const size = Math.random() * 6 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                // Random horizontal position
                particle.style.left = Math.random() * 100 + '%';
                
                // Random animation delay
                particle.style.animationDelay = Math.random() * 15 + 's';
                
                // Random animation duration
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                
                container.appendChild(particle);
            }
        }

        // Initialize particles when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            
            // Add typing effect to title
            const titleElement = document.querySelector('.gradient-text');
            const originalText = titleElement.textContent;
            titleElement.textContent = '';
            
            let i = 0;
            const typeWriter = () => {
                if (i < originalText.length) {
                    titleElement.textContent += originalText.charAt(i);
                    i++;
                    setTimeout(typeWriter, 100);
                }
            };
            
            setTimeout(typeWriter, 1000);
        });

        // Add ripple effect to buttons
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // Add ripple effect to all buttons
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('click', createRipple);
            });
        });
    </script>

</body>

</html>